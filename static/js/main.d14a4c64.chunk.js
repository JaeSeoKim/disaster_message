(this.webpackJsonpdisaster_message=this.webpackJsonpdisaster_message||[]).push([[0],{169:function(e,t,a){e.exports=a(295)},294:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(4),s=a.n(o),l=a(36),m=a(50),i=a(21),u=a.n(i),d=a(40),p=a(301),g=a(296),f=a(304),h=function(e){var t=function(){var t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);Math.max(document.documentElement.scrollTop,document.body.scrollTop)+Math.max(document.documentElement.clientHeight,window.innerHeight)>=t-2&&"function"===typeof e&&e()};Object(r.useEffect)((function(){return window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}),[])},E=a(15),v=a(77),k=a.n(v),y=a(28),b=a(87),M=Object(b.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{disasterMsg:{searchQuery:"",data:[],pageNo:1},maskMap:{map:null,storeList:[],oldMarker:[],oldOverlay:[]}},t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"addDisasterMsgData":return Object(y.a)({},e,{disasterMsg:Object(y.a)({},e.disasterMsg,{data:e.disasterMsg.data.concat(t.data),pageNo:e.disasterMsg.pageNo+1})});case"setMsgSearchQuery":return Object(y.a)({},e,{disasterMsg:Object(y.a)({},e.disasterMsg,{searchQuery:t.searchQuery})});case"setMap":return Object(y.a)({},e,{maskMap:Object(y.a)({},e.maskMap,{map:t.map})});case"setStoreList":return Object(y.a)({},e,{maskMap:Object(y.a)({},e.maskMap,{storeList:t.storeList})});case"addMarker":return console.log("adding... :",t),Object(y.a)({},e,{maskMap:Object(y.a)({},e.maskMap,{oldMarker:t.marker,oldOverlay:t.overlay})});default:return e}})),w=function(e){return{type:"setMsgSearchQuery",searchQuery:e}},O=function(e){return{type:"addDisasterMsgData",data:e}},x=function(e){return{type:"setStoreList",storeList:e}},j=function(e){return{type:"setMap",map:e}},_=function(e,t){return{type:"addMarker",marker:e,overlay:t}},L=M,S=function(){var e=Object(E.c)();return{get:function(){var t=Object(d.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("api : ",a),t.next=3,k.a.get("http://apis.data.go.kr/1741000/DisasterMsg2/getDisasterMsgList",{params:{ServiceKey:"ceZwSatjH2udx0SkvdNFvxm7sqlCyqjq8H+T0QE/QpF0rUlhwj1mmfXw8uNKw9sR7Lvg1iHwBX3Sw4zLCnLo9A==",type:"json",pageNo:a,numOfRows:50,flag:"Y"}}).then((function(t){e(O(t.data.DisasterMsg[1].row))})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},A=!1,B=Object(E.b)((function(e){return{data:e.disasterMsg.data,pageNo:e.disasterMsg.pageNo,searchQuery:e.disasterMsg.searchQuery}}))((function(e){var t=e.data,a=e.pageNo,o=e.searchQuery;n=a,console.log("Query : ",o);var s=S(a).get;if(h(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=6;break}return A=!0,e.next=4,s(n);case 4:A=!1,p.a.success({content:"Loaded!",key:n,duration:2});case 6:case"end":return e.stop()}}),e)})))),Object(r.useEffect)((function(){s(a)}),[]),0===t.length)return c.a.createElement("div",null,c.a.createElement(g.a,{loading:!0,style:{maxWidth:500,margin:"auto",marginBottom:13}}));if(""!==o){var m=t.filter((function(e){return e.location_name.includes(o)}));return c.a.createElement("div",null,m.map((function(e,t){return c.a.createElement("div",{style:{margin:"auto",maxWidth:550},key:t},c.a.createElement(l.b,{to:{pathname:"/detail/".concat(e.md101_sn),state:{location:e.location_name,date:e.create_date,msg:e.msg,id:e.md101_sn}}},c.a.createElement(g.a,{hoverable:!0,style:{maxWidth:500,margin:"auto",marginBottom:13},title:e.location_name+"\t"+e.create_date},e.msg)))})),c.a.createElement(f.a,{style:{maxWidth:500,marginBottom:13},onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:p.a.success({content:"Loaded!",key:n,duration:2});case 3:case"end":return e.stop()}}),e)}))),block:!0},"\ub354\ubcf4\uae30"))}return c.a.createElement("div",null,t.map((function(e,t){return c.a.createElement("div",{style:{margin:"auto",maxWidth:550},key:t},c.a.createElement(l.b,{to:{pathname:"/detail/".concat(e.md101_sn),state:{location:e.location_name,date:e.create_date,msg:e.msg,id:e.md101_sn}}},c.a.createElement(g.a,{hoverable:!0,style:{maxWidth:500,margin:"auto",marginBottom:13},title:e.location_name+"\t"+e.create_date},e.msg)))})),c.a.createElement(f.a,{style:{maxWidth:500,marginBottom:13},onClick:Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:p.a.success({content:"Loaded!",key:n,duration:2});case 3:case"end":return e.stop()}}),e)}))),block:!0},"\ub354\ubcf4\uae30"))})),D=function(){var e=Object(E.c)();return Object(r.useEffect)((function(){e(w(""))}),[]),c.a.createElement("div",{className:"home",style:{marginTop:25}},c.a.createElement(B,null))},K=a(298),N=a(303),Q=K.a.Option,C=function(){var e=Object(E.c)();return c.a.createElement("div",null,c.a.createElement(N.a,{offsetTop:50,style:{marginBottom:10}},c.a.createElement(K.a,{showSearch:!0,style:{maxWidth:500,width:"100%"},placeholder:"\uc9c0\uc5ed\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.",optionFilterProp:"children",onChange:function(t){console.log("selected ".concat(t)),e(w(t))},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},c.a.createElement(Q,{value:"\uac15\uc6d0\ub3c4"},"\uac15\uc6d0\ub3c4"),c.a.createElement(Q,{value:"\uacbd\uae30\ub3c4"},"\uacbd\uae30\ub3c4"),c.a.createElement(Q,{value:"\uacbd\uc0c1\ub0a8\ub3c4"},"\uacbd\uc0c1\ub0a8\ub3c4"),c.a.createElement(Q,{value:"\uacbd\uc0c1\ubd81\ub3c4"},"\uacbd\uc0c1\ubd81\ub3c4"),c.a.createElement(Q,{value:"\uad11\uc8fc\uad11\uc5ed\uc2dc"},"\uad11\uc8fc\uad11\uc5ed\uc2dc"),c.a.createElement(Q,{value:"\ub300\uad6c\uad11\uc5ed\uc2dc"},"\ub300\uad6c\uad11\uc5ed\uc2dc"),c.a.createElement(Q,{value:"\ub300\uc804\uad11\uc5ed\uc2dc"},"\ub300\uc804\uad11\uc5ed\uc2dc"),c.a.createElement(Q,{value:"\ubd80\uc0b0\uad11\uc5ed\uc2dc"},"\ubd80\uc0b0\uad11\uc5ed\uc2dc"),c.a.createElement(Q,{value:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc"},"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc"),c.a.createElement(Q,{value:"\uc6b8\uc0b0\uad11\uc5ed\uc2dc"},"\uc6b8\uc0b0\uad11\uc5ed\uc2dc"),c.a.createElement(Q,{value:"\uc778\ucc9c\uad11\uc5ed\uc2dc"},"\uc778\ucc9c\uad11\uc5ed\uc2dc"),c.a.createElement(Q,{value:"\uc804\ub77c\ub0a8\ub3c4"},"\uc804\ub77c\ub0a8\ub3c4"),c.a.createElement(Q,{value:"\uc804\ub77c\ubd81\ub3c4"},"\uc804\ub77c\ubd81\ub3c4"),c.a.createElement(Q,{value:"\uc81c\uc8fc\ud2b9\ubcc4\uc790\uce58\ub3c4"},"\uc81c\uc8fc\ud2b9\ubcc4\uc790\uce58\ub3c4"),c.a.createElement(Q,{value:"\ucda9\uccad\ub0a8\ub3c4"},"\ucda9\uccad\ub0a8\ub3c4"),c.a.createElement(Q,{value:"\ucda9\uccad\ubd81\ub3c4"},"\ucda9\uccad\ubd81\ub3c4"),c.a.createElement(Q,{value:"\uc138\uc885\ud2b9\ubcc4\uc790\uce58\uc2dc"},"\uc138\uc885\ud2b9\ubcc4\uc790\uce58\uc2dc"))),c.a.createElement(B,{Location:""}))},J=function(){return c.a.createElement("h1",null,"404 Error")},W=a(166),I=window.kakao,G=[],T={},H=[],P=[],z=function(){var e=Object(E.d)((function(e){return{map:e.maskMap.map,storeList:e.maskMap.storeList,oldMarker:e.maskMap.oldMarker,oldOverlay:e.maskMap.oldOverlay}})),t=e.map,a=e.storeList,n=e.oldMarker,r=e.oldOverlay;console.log(n);var c=Object(E.c)();G=a,T=t,H=n,P=r;return{setMarker:function(){H.map((function(e){e.setMap(null)})),P.map((function(e){e.setMap(null)}));var e=[],t=[];G.map((function(a){var n="",r="",c="";switch(a.remain_stat){case"plenty":n="https://raw.githubusercontent.com/JaeSeoKim/disaster_message/master/resource/maskMapMarker/green.png",r="100\uac1c \uc774\uc0c1",c="#87d068";break;case"some":n="https://raw.githubusercontent.com/JaeSeoKim/disaster_message/master/resource/maskMapMarker/blue.png",r="30\uac1c \uc774\uc0c1 100\uac1c \ubbf8\ub9cc",c="#2db7f5";break;case"few":n="https://raw.githubusercontent.com/JaeSeoKim/disaster_message/master/resource/maskMapMarker/red.png",r="30\uac1c \ubbf8\ub9cc",c="#f50";break;case"empty":n="https://raw.githubusercontent.com/JaeSeoKim/disaster_message/master/resource/maskMapMarker/gray.png",r="1\uac1c \uc774\ud558",c="#A9A9A9";break;case"break":n="https://raw.githubusercontent.com/JaeSeoKim/disaster_message/master/resource/maskMapMarker/black.png",r="\ud310\ub9e4\uc911\uc9c0",c="#A9A9A9";break;default:return n="https://raw.githubusercontent.com/JaeSeoKim/disaster_message/master/resource/maskMapMarker/black.png",r="ERROR",void(c="#A9A9A9")}var o='<div style="margin-bottom: 40px;">  <div class="ant-card ant-card-bordered ant-card-hoverable" style="font-size: 12px; border-radius: 5px;">    <div class="ant-card-head" style="padding: 10px;">      <div class="ant-card-head-wrapper" >        <div class="ant-card-head-title" style="font-size: 13px; padding: 0px;">'+"          ".concat(a.name)+'        </div>      </div>    </div>    <div class="ant-card-body" style="text-align: left; padding: 10px;">'+'      <a href="https://map.kakao.com/link/map/'.concat(a.name,",").concat(a.lat,",").concat(a.lng,'" target="_blank" >')+"       <p>\uc8fc\uc18c: ".concat(a.addr,"</p>")+"      </a>"+"       <p>\uc0dd\uc131\uc2dc\uac04: ".concat(a.created_at,"</p>")+"       <p>\uc785\uace0\uc2dc\uac04: ".concat(a.stock_at,"</p>")+'       <span class="ant-tag ant-tag-has-color" style="background-color:'.concat(c,'">').concat(r,"</span>")+"   </div>  </div></div>",s=new I.maps.CustomOverlay({map:null,position:new I.maps.LatLng(a.lat,a.lng),content:o,yAnchor:1}),l=new I.maps.Size(30,35),m=new I.maps.MarkerImage(n,l),i=new I.maps.Marker({map:T,position:new I.maps.LatLng(a.lat,a.lng),title:a.name,image:m});I.maps.event.addListener(i,"click",(function(){T.panTo(i.getPosition()),s.setMap(T)})),e.push(i),t.push(s)})),c(_(e,t)),console.log(e,t)}}},R=function(){var e=Object(E.c)(),t=Object(r.useState)({address:"",count:0,stores:[{addr:"",code:"",created_at:"",lat:0,lng:0,name:"",remain_stat:"",stock_at:"",type:""}]}),a=Object(W.a)(t,2),n=a[0],c=a[1],o=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("location: ",t),e.next=3,k.a.get("https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByAddr/json?address=".concat(t)).then((function(e){var t=e.data,a=t.address,n=t.count,r=t.stores;console.log(e),c({address:a,count:n,stores:r}),console.log(r)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(u.a.mark((function t(a,n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("lat: ",a," lng: ",n," m: ",r),t.next=3,k.a.get("https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat=".concat(a,"&lng=").concat(n,"&m=").concat(r)).then((function(t){var a=t.data,n=(a.count,a.stores);e(x(n)),console.log(n.length)})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}();return Object(y.a)({},n,{getMaskDataAddr:o,getMaskDataGeo:s})},q=a(299),F=a(302),X=q.a.Panel,U=function(e){var t=e.stores,a=e.address;return c.a.createElement("div",{className:"more_Info"},c.a.createElement(q.a,{style:{maxWidth:500,margin:"auto",marginBottom:13}},c.a.createElement(X,{header:a+"\uc758 \ud604\uc7ac \uad6c\ub9e4 \uac00\ub2a5\ud55c \ub9c8\uc2a4\ud06c \ud310\ub9e4\ucc98",key:"maskMap"},c.a.createElement("h3",{style:{textAlign:"left"}},c.a.createElement("p",null,"\ud604\uc7ac \uad6c\ub9e4 \uac00\ub2a5\ud55c \uad6c\ub9e4\ucc98\ub9cc \ubaa9\ub85d\ud654 \ud588\uc2b5\ub2c8\ub2e4."),c.a.createElement("p",null,"\ud574\ub2f9 \uce74\ub4dc\ub97c \ud074\ub9ad \ud558\uc2dc\uba74 \ud310\ub9e4\ucc98 \uc8fc\uc18c\ub97c \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),t.map((function(e,t){return"undefined"!==typeof e.remain_stat&&""!==e.remain_stat&&null!==e.remain_stat&&"break"!==e.remain_stat&&"empty"!==e.remain_stat&&c.a.createElement("a",{href:"https://map.kakao.com/link/map/"+e.name+","+e.lat+","+e.lng,target:"_blank",key:e.code},c.a.createElement(g.a,{style:{maxWidth:500,margin:"auto",marginBottom:13},title:e.name},c.a.createElement("div",{style:{textAlign:"left"}},c.a.createElement("p",null,"\uc8fc\uc18c : ",e.addr),c.a.createElement("p",null,"\ub9c8\uc9c0\ub9c9 \uc5c5\ub370\uc774\ud2b8 : ",e.created_at),c.a.createElement("p",null,"\uc785\uace0 \uc2dc\uac04 : ",e.stock_at),c.a.createElement("p",null,"plenty"===e.remain_stat&&c.a.createElement(F.a,{color:"#87d068"},"100\uac1c \uc774\uc0c1"),"some"===e.remain_stat&&c.a.createElement(F.a,{color:"#2db7f5"},"30\uac1c \uc774\uc0c1 100\uac1c \ubbf8\ub9cc"),"few"===e.remain_stat&&c.a.createElement(F.a,{color:"#f50"},"30\uac1c \ubbf8\ub9cc")))))})))))},Y=function(e){var t=R(),a=t.address,n=t.count,o=t.stores,s=t.getMaskDataAddr;Object(r.useEffect)((function(){void 0===e.location.state?e.history.push("/"):s(e.location.state.location)}),[]);var l=e.location.state;return c.a.createElement("div",null,void 0===l?c.a.createElement(J,null):c.a.createElement("div",null,c.a.createElement("h1",null,"\uac1c\ubc1c\uc911.........."),c.a.createElement(g.a,{style:{maxWidth:500,margin:"auto",marginBottom:13},title:l.location+"\t"+l.date},l.msg),0===n?c.a.createElement("div",{className:"maskStoreList"}):c.a.createElement(U,{stores:o,address:a})))},Z=a(297),V=a(309),$=a(308),ee=Z.a.Title,te=Z.a.Paragraph,ae=function(){return c.a.createElement(Z.a,null,c.a.createElement("a",{href:"https://github.com/JaeSeoKim/disaster_message/"},c.a.createElement(ee,null,"Disaster_message")),c.a.createElement(te,null,"\uc774 \ud504\ub85c\uc81d\ud2b8\ub294 \ud55c\uad6d \uacf5\uacf5\ub370\uc774\ud130 \ud3ec\ud138\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 `\uc7ac\ub09c\ubb38\uc790\ubc29\uc1a1 \ubc1c\ub839\ud604\ud669 \uc11c\ube44\uc2a4 API` \ub97c \uc774\uc6a9\ud558\uc5ec \uc81c\uc791 \ud558\uc600\uc2b5\ub2c8\ub2e4."),c.a.createElement(ee,{level:4},"Created by JaeSeoKim"),c.a.createElement("a",{href:"https://github.com/JaeSeoKim"},c.a.createElement(ee,{level:4},c.a.createElement(V.a,null)," Github")),c.a.createElement("a",{href:"https://jaeseokim.tistory.com/"},c.a.createElement(ee,{level:4},c.a.createElement($.a,null)," Blog")))},ne=a(300),re=a(305),ce=a(306),oe=a(310),se=a(307),le=function(){return c.a.createElement(N.a,{style:{marginBottom:10}},c.a.createElement("div",null,c.a.createElement(ne.a,{defaultSelectedKeys:["home"],defaultOpenKeys:["menu"],mode:"horizontal",theme:"white"},c.a.createElement(ne.a.Item,{key:"home"},c.a.createElement(re.a,null),c.a.createElement(l.c,{to:"/"},c.a.createElement("span",null,"\uc7ac\ub09c\ubb38\uc790 \ubaa9\ub85d"))),c.a.createElement(ne.a.Item,{key:"location"},c.a.createElement(ce.a,null),c.a.createElement(l.c,{to:"/location"},c.a.createElement("span",null,"\uc9c0\uc5ed\ubcc4 \uc7ac\ub09c\ubb38\uc790"))),c.a.createElement(ne.a.Item,{key:"maskMap"},c.a.createElement(oe.a,null),c.a.createElement(l.c,{to:"/maskMap"},c.a.createElement("span",null,"\ub9c8\uc2a4\ud06c\ub9f5"))),c.a.createElement(ne.a.Item,{key:"about"},c.a.createElement(se.a,null),c.a.createElement(l.c,{to:"/about"},c.a.createElement("span",null,"About"))))))},me=window.kakao,ie=function(){var e=Object(E.c)();return Object(r.useEffect)((function(){var t=document.getElementById("mask-map"),a={center:new me.maps.LatLng(33.450701,126.570667),level:3},n=new me.maps.Map(t,a);e(j(n),[n])}),[]),c.a.createElement("div",{id:"mask-map",style:{height:"100%"}})},ue=window.kakao,de={},pe=function(){var e=Object(E.d)((function(e){return{map:e.maskMap.map}}),[]).map;de=e;return{getGeo:function(){navigator.geolocation?null!==de&&navigator.geolocation.getCurrentPosition((function(e){de.panTo(new ue.maps.LatLng(e.coords.latitude,e.coords.longitude))})):alert("\uc774 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 Geolocation\uc774 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")}}},ge=window.kakao,fe={},he=function(){var e=Object(E.d)((function(e){return{map:e.maskMap.map}})),t=e.map,a=(e.storeList,R().getMaskDataGeo),n=z().setMarker;fe=t;return{setEvent:function(){ge.maps.event.addListener(fe,"dragend",(function(){fe.getLevel();var e=fe.getCenter();a(e.getLat(),e.getLng(),1e3),console.log(e.getLat(),e.getLng()),n()}))}}},Ee=(window.kakao,function(){var e=R(),t=(e.stores,e.getMaskDataGeo),a=z().setMarker,n=pe().getGeo,o=he().setEvent;return Object(r.useEffect)((function(){t(37.4388,127.1396,1e4).then((function(){n(),a(),o()}))}),[]),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h3",null,"\uacf5\uc801 \ub9c8\uc2a4\ud06c \uc9c0\ub3c4 \uc785\ub2c8\ub2e4."),c.a.createElement("h4",null,"\ud574\ub2f9 \ub9c8\ucee4\uc744 \ud074\ub9ad \ud558\uc2dc\uba74 \uc790\uc138\ud55c \uc815\ubcf4\ub97c \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),c.a.createElement("div",{style:{height:"80vh",padding:"10px"}},c.a.createElement(ie,null)))});var ve=function(){return c.a.createElement(E.a,{store:L},c.a.createElement(l.a,null,c.a.createElement(le,null),c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/",exact:!0,component:D}),c.a.createElement(m.a,{path:"/location",exact:!0,component:C}),c.a.createElement(m.a,{path:"/about",exact:!0,component:ae}),c.a.createElement(m.a,{path:"/detail/:id",exact:!0,component:Y}),c.a.createElement(m.a,{path:"/maskMap",exact:!0,component:Ee}),c.a.createElement(m.a,{component:J}))))};a(293),a(294);s.a.render(c.a.createElement(ve,null),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.d14a4c64.chunk.js.map